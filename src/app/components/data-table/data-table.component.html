<section class="table-card">
  <div class="table-header">
    <h2>{{ title() }}</h2>
    @if (showViewAll()) {
      <button mat-stroked-button class="view-all" type="button">View all</button>
    }
  </div>

  <table mat-table [dataSource]="pagedRows()" class="mat-elevation-z0">
    @for (column of columns(); track column.key) {
      <ng-container [matColumnDef]="column.key">
        <th mat-header-cell *matHeaderCellDef>{{ column.label }}</th>
        <td mat-cell *matCellDef="let row">{{ row[column.key] }}</td>
      </ng-container>
    }

    <tr mat-header-row *matHeaderRowDef="displayedColumns()"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns()"></tr>
  </table>

  <div class="table-footer">
    <div class="rows-control">
      <span>Rows per page:</span>
      <mat-select
        [value]="pageSize()"
        (selectionChange)="updatePageSize($event.value)"
      >
        @for (option of pageSizeOptions; track option) {
          <mat-option [value]="option">{{ option }}</mat-option>
        }
      </mat-select>
    </div>
    <div class="range-label">{{ rangeLabel() }}</div>
    <div class="pager">
      <button
        mat-icon-button
        type="button"
        (click)="prevPage()"
        [disabled]="pageIndex() === 0"
      >
        <mat-icon fontSet="material-icons-outlined">chevron_left</mat-icon>
      </button>
      <button
        mat-icon-button
        type="button"
        (click)="nextPage()"
        [disabled]="pageIndex() >= pageCount() - 1"
      >
        <mat-icon fontSet="material-icons-outlined">chevron_right</mat-icon>
      </button>
    </div>
  </div>
</section>
